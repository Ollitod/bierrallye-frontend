"use strict";(self.webpackChunkbierrallye_frontend=self.webpackChunkbierrallye_frontend||[]).push([[595],{5595:(N,d,o)=>{o.r(d),o.d(d,{OnboardingComponent:()=>A});var _=o(4755),c=o(6032),u=o(1728),g=o(430),a=o(9401),p=o(1292),s=o(9114),f=o(8097),C=o(1217),b=o(787),m=o(6012),t=o(2223),x=o(8829),O=o(4959),h=o(2018);function M(n,r){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title"),t._uU(4,"Team anlegen"),t.qZA()(),t.TgZ(5,"mat-card-content")(6,"form",4)(7,"div",5)(8,"div",6)(9,"mat-form-field")(10,"mat-label"),t._uU(11,"Spieler 1"),t.qZA(),t._UZ(12,"input",7),t.qZA(),t.TgZ(13,"mat-form-field")(14,"mat-label"),t._uU(15,"Spieler 2"),t.qZA(),t._UZ(16,"input",8),t.qZA()(),t.TgZ(17,"div",6)(18,"mat-form-field")(19,"mat-label"),t._uU(20,"Email"),t.qZA(),t._UZ(21,"input",9),t.qZA(),t.TgZ(22,"mat-form-field")(23,"mat-label"),t._uU(24,"Startblock"),t.qZA(),t._UZ(25,"input",10),t.qZA()(),t.TgZ(26,"div",6)(27,"mat-form-field")(28,"mat-label"),t._uU(29,"UUID"),t.qZA(),t._UZ(30,"input",11),t.qZA(),t.TgZ(31,"mat-form-field")(32,"mat-label"),t._uU(33,"Box-Nr."),t.qZA(),t._UZ(34,"input",12,13),t.qZA()(),t.TgZ(36,"div",14)(37,"button",15),t.NdJ("click",function(){t.CHM(e);const l=t.oxw();return t.KtG(l.generateLoginQrCode())}),t._uU(38," QR-Code generieren "),t.qZA(),t.TgZ(39,"button",16),t.NdJ("click",function(){t.CHM(e);const l=t.oxw();return t.KtG(l.createTeam())}),t._uU(40," Team erstellen "),t.qZA()()()()()(),t.BQk()}if(2&n){const e=t.oxw();t.xp6(6),t.Q6J("formGroup",e.teamForm),t.xp6(33),t.Q6J("disabled",!e.teamForm.valid)}}function E(n,r){1&n&&(t.ynx(0),t.TgZ(1,"mat-icon",17),t._uU(2,"check_circle"),t.qZA(),t.BQk())}function T(n,r){1&n&&(t.ynx(0),t.TgZ(1,"mat-icon",18),t._uU(2,"cancel"),t.qZA(),t.BQk())}function v(n,r){if(1&n&&(t.YNc(0,E,3,0,"ng-container",1),t.YNc(1,T,3,0,"ng-container",1)),2&n){const e=r.$implicit;t.Q6J("ngIf",e.active),t.xp6(1),t.Q6J("ngIf",!e.active)}}function I(n,r){1&n&&t._uU(0),2&n&&t.hij(" ",r.$implicit.drink1.name," ")}function P(n,r){1&n&&t._uU(0),2&n&&t.hij(" ",r.$implicit.drink2.name," ")}function U(n,r){1&n&&t._uU(0),2&n&&t.hij(" ",r.$implicit.startblock.name," ")}function Z(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){const D=t.CHM(e).$implicit,y=t.oxw();return t.KtG(y.fillTeam(D))}),t.TgZ(1,"mat-icon"),t._uU(2,"start"),t.qZA()()}2&n&&t.Q6J("disabled",!r.$implicit.active)}const k=function(){return["drink1","drink2","startblock","apply"]};let A=(()=>{class n{constructor(e,i,l){this.registrationService=e,this.teamService=i,this.toastr=l,this.columnSpecs=[{displayedColumn:"player1",header:"Spieler 1"},{displayedColumn:"player2",header:"Spieler 2"},{displayedColumn:"active",header:"Aktiv"},{displayedColumn:"email",header:"Email"},{displayedColumn:"drink1",header:"Getr\xe4nk 1"},{displayedColumn:"drink2",header:"Getr\xe4nk 2"},{displayedColumn:"startblock",header:"Startblock"},{displayedColumn:"apply",header:"\xdcbernehmen"}],this.currentRegistration=void 0,this.registrations=[],this.teamForm=new a.cw({teamFirstMember:new a.NI({value:"",disabled:!0},{validators:[a.kI.required]}),teamSecondMember:new a.NI({value:"",disabled:!0},{validators:[a.kI.required]}),uuid:new a.NI({value:"",disabled:!0},{validators:[a.kI.required]}),startblock:new a.NI({value:"",disabled:!0},{validators:[a.kI.required]}),email:new a.NI({value:"",disabled:!0},{validators:[a.kI.required]}),boxId:new a.NI(null,{validators:[a.kI.required]})})}ngOnInit(){this.registrationService.getRegistrations().subscribe(i=>{this.registrations=i}),new BroadcastChannel("qr-login").onmessage=i=>{"initialized"===i.data&&this.sendMessageToQrLogin()}}sendMessageToQrLogin(){new BroadcastChannel("qr-login").postMessage({encodedURL:this.encodedURL})}fillTeam(e){this.currentRegistration=e,this.teamForm.patchValue({...e,teamFirstMember:e.player1,teamSecondMember:e.player2,startblock:e.startblock.name})}createTeam(){this.teamService.create(this.teamForm.getRawValue()).subscribe(e=>{this.currentRegistration=void 0,this.teamForm.reset(),this.toastr.success("Das Team ist startklar","Prost!")},e=>{this.toastr.error(e.error?e.error:"Beim anlegen des Teams ist ein unbekannter Fehler aufgetreten","Fehler")})}generateLoginQrCode(){this.encodedURL=window.location.origin+`/login/?username=${this.teamForm.controls.email.value}&uuid=${this.teamForm.controls.uuid.value}`,window.open(window.location.origin+"/qr-login","_blank","location=yes,height=570,width=520,scrollbars=yes,status=yes")}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(x.c),t.Y36(O.U),t.Y36(h._W))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-onboarding"]],standalone:!0,features:[t.jDz],decls:8,vars:10,consts:[[1,"container"],[4,"ngIf"],[3,"columnSpecs","columnsExcludedFromSort","data"],[3,"gpxCustomColumn"],[3,"formGroup"],[1,"form-container"],[1,"form-row"],["formControlName","teamFirstMember","id","teamFirstMember","matInput",""],["formControlName","teamSecondMember","id","teamSecondMember","matInput",""],["formControlName","email","id","email","matInput",""],["formControlName","startblock","id","startblock","matInput",""],["formControlName","uuid","id","uuid","matInput",""],["formControlName","boxId","id","boxId","matInput",""],["boxId",""],[1,"button-container"],["color","accent","mat-raised-button","",3,"click"],["color","primary","mat-raised-button","","type","submit",3,"disabled","click"],[1,"green"],[1,"red"],["mat-raised-button","",3,"disabled","click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.YNc(1,M,41,2,"ng-container",1),t.TgZ(2,"gpx-dynamic-table",2),t.YNc(3,v,2,2,"ng-template",3),t.YNc(4,I,1,1,"ng-template",3),t.YNc(5,P,1,1,"ng-template",3),t.YNc(6,U,1,1,"ng-template",3),t.YNc(7,Z,3,1,"ng-template",3),t.qZA()()),2&e&&(t.xp6(1),t.Q6J("ngIf",i.currentRegistration),t.xp6(1),t.Q6J("columnSpecs",i.columnSpecs)("columnsExcludedFromSort",t.DdM(9,k))("data",i.registrations),t.xp6(1),t.Q6J("gpxCustomColumn","active"),t.xp6(1),t.Q6J("gpxCustomColumn","drink1"),t.xp6(1),t.Q6J("gpxCustomColumn","drink2"),t.xp6(1),t.Q6J("gpxCustomColumn","startblock"),t.xp6(1),t.Q6J("gpxCustomColumn","apply"))},dependencies:[_.ez,_.O5,c.cF,c.Qn,c.xz,u.ot,u.lW,g.Ps,g.Hw,a.u5,a._Y,a.Fj,a.JJ,a.JL,p.p9,s.lN,s.KE,s.hX,f.c,f.Nt,C.Ng,b.LD,a.UX,a.sg,a.u,p.LX,m.QW,m.a8,m.dn,m.dk,m.n5],styles:[".form-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding-top:15px;box-sizing:border-box}.mat-mdc-card[_ngcontent-%COMP%]{background-color:#fdf1cd}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;box-sizing:border-box;gap:15px}.form-row[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;gap:15px}.form-row[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{flex-grow:1}.green[_ngcontent-%COMP%]{color:#007a53}.red[_ngcontent-%COMP%]{color:#e30413}.button-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:15px;box-sizing:border-box}.button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}"]}),n})()}}]);